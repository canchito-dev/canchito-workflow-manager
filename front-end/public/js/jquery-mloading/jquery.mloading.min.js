/* Author：mingyuhisoft@163.com
 * Github:https://github.com/imingyu/jquery.mloading
 * Npm:npm install jquery.mloading.js
 * Date：2016-7-4
 */
!function(A,t){"use strict";"object"==typeof module&&"object"==typeof module.exports&&t(require("jquery"),A),"function"==typeof define?define.cmd?define(function(n,i,e){var o=n("jquery");t(o,A)}):define(["jquery"],function(n){t(n,A)}):t(A.jQuery,A)}("undefined"!=typeof window?window:this,function(A,t,n){"use strict";function i(t,n){n=n||{},this.dom=t,this.options=A.extend(!0,{},i.defaultOptions,n),this.curtain=null,this.render().show()}if(A||(A=t.jQuery||null),!A)throw new TypeError("必须引入jquery库方可正常使用！");var e=Array.prototype.slice,o=function(A,t){var n=!0;for(var i in A)if(A[i]!==t[A]){n=!0;break}return n};i.prototype={constructor:i,initElement:function(){var t=this.dom,n=this.options,i=t.children(".mloading"),e=i.children(".mloading-body"),o=e.children(".mloading-bar"),s=o.children(".mloading-icon"),a=o.find(".mloading-text");if(0==i.length&&(i=A('<div class="mloading"></div>'),t.append(i)),0==e.length&&(e=A('<div class="mloading-body"></div>'),i.append(e)),0==o.length&&(o=A('<div class="mloading-bar"></div>'),e.append(o)),0==s.length){var l=document.createElement(n.iconTag);s=A(l),s.addClass("mloading-icon"),o.append(s)}return 0==a.length&&(a=A('<span class="mloading-text"></span>'),o.append(a)),this.curtainElement=i,this.bodyElement=e,this.barElement=o,this.iconElement=s,this.textElement=a,this},render:function(){var A=this.dom,t=this.options;return this.initElement(),A.is("html")||A.is("body")?this.curtainElement.addClass("mloading-full"):(this.curtainElement.removeClass("mloading-full"),A.hasClass("mloading-container")||A.addClass("mloading-container")),t.mask?this.curtainElement.addClass("mloading-mask"):this.curtainElement.removeClass("mloading-mask"),""!=t.content&&"undefined"!=typeof t.content?t.html?this.bodyElement.html(t.content):this.bodyElement.text(t.content):(this.iconElement.attr("src",t.icon),t.html?this.textElement.html(t.text):this.textElement.text(t.text)),this},setOptions:function(t){t=t||{};var n=this.options;this.options=A.extend(!0,{},this.options,t),o(n,this.options)||this.render()},show:function(){var A=(this.dom,this.options,this.barElement);return this.curtainElement.addClass("active"),A.css({marginTop:"-"+A.outerHeight()/2+"px",marginLeft:"-"+A.outerWidth()/2+"px"}),this},hide:function(){var A=this.dom;this.options;return this.curtainElement.removeClass("active"),A.is("html")||A.is("body")||A.removeClass("mloading-container"),this},destroy:function(){var A=this.dom;this.options;return this.curtainElement.remove(),A.is("html")||A.is("body")||A.removeClass("mloading-container"),A.removeData(i.dataKey),this}},i.dataKey="MLoading",i.defaultOptions={text:"Loading...",iconTag:"img",icon:"data:image/gif;base64,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",html:!1,content:"",mask:!0},A.fn.mLoading=function(t){var n={},o="",s=[];return"object"==typeof t?n=t:"string"==typeof t&&(o=t,s=e.call(arguments).splice(0,1)),this.each(function(t,e){var a=A(e),l=a.data(i.dataKey);if(l||(l=new i(a,n)),o){var r=l[o];"function"==typeof r&&r.apply(l,s)}})}});