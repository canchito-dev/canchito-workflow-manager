function utf8_encode(r){if(null===r||void 0===r)return"";var e,a,t=r+"",n="",o=0;e=a=0,o=t.length;for(var i=0;i<o;i++){var l=t.charCodeAt(i),f=null;if(l<128)a++;else if(l>127&&l<2048)f=String.fromCharCode(l>>6|192,63&l|128);else if(55296!=(63488&l))f=String.fromCharCode(l>>12|224,l>>6&63|128,63&l|128);else{if(55296!=(64512&l))throw new RangeError("Unmatched trail surrogate at "+i);var d=t.charCodeAt(++i);if(56320!=(64512&d))throw new RangeError("Unmatched lead surrogate at "+(i-1));l=((1023&l)<<10)+(1023&d)+65536,f=String.fromCharCode(l>>18|240,l>>12&63|128,l>>6&63|128,63&l|128)}null!==f&&(a>e&&(n+=t.slice(e,a)),n+=f,e=a=i+1)}return a>e&&(n+=t.slice(e,o)),n}